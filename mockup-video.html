<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ECHO. — Product Showcase</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,300;9..144,400;9..144,600&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ============================================================
   ECHO. PRODUCT SHOWCASE — OCEAN + UI OVERLAY
   7 scenes • 35s • Grey ocean → Dreamy colors + UI
   ============================================================ */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --accent-purple: #c084fc;
  --accent-rose: #f472b6;
}

body {
  font-family: 'Manrope', -apple-system, 'Segoe UI', sans-serif;
  overflow: hidden;
  background: #0a0a12;
  width: 100vw;
  height: 100vh;
}

/* ========== OCEAN BACKGROUND — CSS Animated ========== */
.ocean-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

/* Base ocean gradient — starts grey, transitions to dreamy */
.ocean-base {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg,
    #2c3e50 0%,
    #34495e 25%,
    #2c3e50 50%,
    #1a252f 75%,
    #0d1117 100%
  );
  transition: background 8s ease;
}
.ocean-base.dreamy {
  background: linear-gradient(180deg,
    #1a1a3e 0%,
    #2d1b4e 20%,
    #1e3a5f 40%,
    #0d3b4f 60%,
    #1a3a4a 80%,
    #0d1117 100%
  );
}

/* Animated waves */
.wave {
  position: absolute;
  width: 200%;
  left: -50%;
  bottom: 0;
  height: 45%;
  opacity: 0.3;
  animation: waveDrift 12s ease-in-out infinite;
}
.wave svg {
  width: 100%;
  height: 100%;
}
.wave:nth-child(2) {
  height: 40%;
  opacity: 0.2;
  animation-duration: 15s;
  animation-delay: -3s;
}
.wave:nth-child(3) {
  height: 35%;
  opacity: 0.15;
  animation-duration: 18s;
  animation-delay: -7s;
}

@keyframes waveDrift {
  0%, 100% { transform: translateX(0) translateY(0); }
  25% { transform: translateX(-2%) translateY(-8px); }
  50% { transform: translateX(-4%) translateY(0); }
  75% { transform: translateX(-2%) translateY(8px); }
}

/* Color overlay — fades in for dreamy effect */
.ocean-color-overlay {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 6s ease;
  background:
    radial-gradient(ellipse 80% 60% at 30% 40%, rgba(77, 150, 170, 0.4) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 70% 30%, rgba(192, 132, 252, 0.25) 0%, transparent 55%),
    radial-gradient(ellipse 70% 70% at 50% 70%, rgba(30, 80, 120, 0.5) 0%, transparent 50%),
    radial-gradient(ellipse 50% 40% at 20% 80%, rgba(244, 114, 182, 0.15) 0%, transparent 50%);
}
.ocean-color-overlay.active { opacity: 1; }

/* Aurora / light reflections */
.ocean-aurora {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 4s ease;
  background:
    radial-gradient(ellipse 40% 30% at 50% 20%, rgba(110, 231, 183, 0.12) 0%, transparent 70%),
    radial-gradient(ellipse 30% 20% at 30% 50%, rgba(192, 132, 252, 0.1) 0%, transparent 60%),
    radial-gradient(ellipse 35% 25% at 70% 60%, rgba(244, 114, 182, 0.08) 0%, transparent 60%);
  animation: auroraPulse 8s ease-in-out infinite;
}
.ocean-aurora.active { opacity: 1; }

@keyframes auroraPulse {
  0%, 100% { filter: brightness(1) hue-rotate(0deg); }
  33% { filter: brightness(1.15) hue-rotate(8deg); }
  66% { filter: brightness(0.95) hue-rotate(-5deg); }
}

/* Floating light particles */
.particle {
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  animation: particleFloat 10s ease-in-out infinite;
  opacity: 0;
}
.particle.active { opacity: 1; transition: opacity 3s ease; }

@keyframes particleFloat {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.2; }
  25% { transform: translate(10px, -30px) scale(1.5); opacity: 0.6; }
  50% { transform: translate(-5px, -50px) scale(1); opacity: 0.3; }
  75% { transform: translate(15px, -20px) scale(1.3); opacity: 0.5; }
}

/* ========== STAGE ========== */
.stage {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
}

/* ========== SCENE SYSTEM ========== */
.scene {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  z-index: 1;
  pointer-events: none;
}
.scene.active { pointer-events: auto; }

/* ========== TYPOGRAPHY — White on dark ocean ========== */
.text-hero {
  font-family: 'Fraunces', 'Times New Roman', serif;
  font-weight: 300;
  color: rgba(255, 255, 255, 0.95);
  line-height: 1.15;
  letter-spacing: -2px;
  text-shadow: 0 2px 40px rgba(0, 0, 0, 0.3);
}
.text-hero.lg { font-size: 56px; }

.text-sub {
  font-family: 'Manrope', sans-serif;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.6);
  font-size: 18px;
  line-height: 1.6;
}
.text-sub.xs {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 3px;
  color: rgba(255, 255, 255, 0.4);
}

.text-accent {
  background: linear-gradient(135deg, var(--accent-purple), var(--accent-rose));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 20px rgba(192, 132, 252, 0.4));
}

/* ========== SCENE 1 — INTRO ========== */
.scene-intro {
  flex-direction: column;
  gap: 24px;
  text-align: center;
}
.scene-intro .logo-wrapper { opacity: 0; transform: scale(0.8); }
.scene-intro .tagline { opacity: 0; transform: translateY(20px); }

.echo-logo-large {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}
.echo-logo-large svg { filter: drop-shadow(0 8px 30px rgba(192, 132, 252, 0.5)); }
.echo-logo-large .logo-name {
  font-family: 'Fraunces', serif;
  font-size: 72px;
  font-weight: 600;
  color: white;
  letter-spacing: -3px;
  text-shadow: 0 4px 40px rgba(192, 132, 252, 0.3);
}

/* ========== SCENE 2 — HOOK ========== */
.scene-hook {
  flex-direction: column;
  text-align: center;
  padding: 0 60px;
  gap: 16px;
}
.scene-hook .hook-line { opacity: 0; transform: translateY(25px); }

/* ========== SCENES 3-6 — FEATURE + MOCKUP ========== */
.scene-feature { gap: 60px; padding: 0 80px; }
.scene-feature .feature-text {
  flex: 1;
  max-width: 420px;
  opacity: 0;
  transform: translateX(-40px);
}
.scene-feature .feature-text h3 {
  font-family: 'Fraunces', serif;
  font-size: 36px;
  font-weight: 300;
  color: rgba(255,255,255,0.95);
  line-height: 1.2;
  letter-spacing: -1px;
  margin-bottom: 14px;
  text-shadow: 0 2px 30px rgba(0,0,0,0.3);
}
.scene-feature .feature-text p {
  font-size: 16px;
  color: rgba(255,255,255,0.55);
  line-height: 1.65;
  max-width: 340px;
}
.scene-feature .feature-text .feature-tag {
  display: inline-block;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  color: var(--accent-purple);
  margin-bottom: 12px;
  font-weight: 600;
  text-shadow: 0 0 20px rgba(192,132,252,0.3);
}

.scene-feature.reverse { flex-direction: row-reverse; }
.scene-feature.reverse .feature-text { transform: translateX(40px); text-align: right; }
.scene-feature.reverse .feature-text p { margin-left: auto; }

/* ========== PHONE MOCKUP ========== */
.phone-mockup {
  flex-shrink: 0;
  width: 280px;
  height: 572px;
  opacity: 0;
  transform: translateX(40px);
}
.scene-feature.reverse .phone-mockup { transform: translateX(-40px); }

.phone-body {
  width: 100%;
  height: 100%;
  background: #1a1a2e;
  border-radius: 42px;
  padding: 10px;
  box-shadow:
    0 40px 80px rgba(0, 0, 0, 0.4),
    0 16px 40px rgba(0, 0, 0, 0.3),
    0 0 60px rgba(192, 132, 252, 0.08),
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 0 0 1px rgba(255,255,255,0.05);
  position: relative;
}
.phone-body::before {
  content: '';
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 96px;
  height: 28px;
  background: #000;
  border-radius: 16px;
  z-index: 20;
}

.phone-screen {
  width: 100%;
  height: 100%;
  border-radius: 33px;
  overflow: hidden;
  background: #faf9f7;
}

.screen-content { width: 100%; height: 100%; }

/* Mini UI inside phone */
.mini-status {
  display: flex;
  justify-content: space-between;
  padding: 10px 22px 4px;
  font-size: 11px;
  font-weight: 600;
  color: #0f172a;
}
.mini-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 14px 8px;
  border-bottom: 1px solid rgba(15,23,42,0.06);
}
.mini-topbar-left { display: flex; align-items: center; gap: 6px; }
.mini-topbar h2 { font-family: 'Fraunces', serif; font-size: 16px; font-weight: 600; color: #0f172a; }
.mini-topbar-nav { display: flex; gap: 4px; }
.mini-pill { padding: 4px 10px; border-radius: 999px; font-size: 9px; font-weight: 500; background: #0f172a; color: white; }
.mini-pill.outline { background: white; color: #475569; border: 1px solid rgba(15,23,42,0.1); }
.mini-btn { width: 26px; height: 26px; border-radius: 50%; background: #0f172a; display: flex; align-items: center; justify-content: center; }
.mini-btn svg { width: 12px; height: 12px; stroke: white; fill: none; stroke-width: 2.5; }

.mini-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; padding: 12px 14px; }
.mini-tile { aspect-ratio: 1; border-radius: 14px; overflow: hidden; box-shadow: 0 2px 12px rgba(15,23,42,0.05); }
.mini-tile canvas { width: 100%; height: 100%; display: block; }

/* Create screen */
.create-screen { padding: 12px 14px; }
.create-header { font-family: 'Fraunces', serif; font-size: 18px; font-weight: 400; color: #0f172a; margin-bottom: 10px; }
.create-textarea {
  width: 100%; height: 100px; border-radius: 14px; border: 1px solid rgba(15,23,42,0.08);
  background: white; padding: 12px; font-family: 'Manrope', sans-serif; font-size: 11px; color: #475569; line-height: 1.5;
}
.create-styles { display: flex; gap: 6px; margin-top: 10px; flex-wrap: wrap; }
.style-chip { padding: 4px 10px; border-radius: 999px; font-size: 8px; font-weight: 500; border: 1px solid rgba(15,23,42,0.1); color: #475569; }
.style-chip.selected { background: #0f172a; color: white; border-color: #0f172a; }

.voice-wave { display: flex; align-items: center; justify-content: center; gap: 3px; margin-top: 14px; height: 30px; }
.voice-bar { width: 3px; border-radius: 2px; background: linear-gradient(to top, #c084fc, #f472b6); animation: waveBar 1s ease-in-out infinite; }
@keyframes waveBar { 0%, 100% { height: 6px; } 50% { height: 22px; } }

/* Visual screen */
.visual-screen { padding: 12px 14px; text-align: center; }
.visual-canvas-wrapper { width: 200px; height: 200px; margin: 10px auto; border-radius: 20px; overflow: hidden; box-shadow: 0 8px 32px rgba(15,23,42,0.08); }
.visual-canvas-wrapper canvas { width: 100%; height: 100%; display: block; }
.visual-label { font-size: 10px; color: #94a3b8; text-transform: uppercase; letter-spacing: 1.5px; margin-top: 8px; }
.visual-emotion { font-family: 'Fraunces', serif; font-size: 20px; color: #0f172a; margin-top: 4px; }
.visual-intensity { font-size: 11px; color: #475569; margin-top: 2px; }

/* Stats screen */
.stats-screen { padding: 12px 14px; }
.stat-card { background: white; border-radius: 14px; padding: 12px; margin-bottom: 8px; box-shadow: 0 2px 8px rgba(15,23,42,0.04); }
.stat-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: #94a3b8; margin-bottom: 4px; }
.stat-value { font-family: 'Fraunces', serif; font-size: 22px; font-weight: 600; color: #0f172a; }
.stat-bar-row { display: flex; align-items: center; gap: 6px; margin-top: 3px; }
.stat-bar-label { font-size: 9px; color: #475569; width: 60px; }
.stat-bar-track { flex: 1; height: 6px; border-radius: 3px; background: rgba(15,23,42,0.05); overflow: hidden; }
.stat-bar-fill { height: 100%; border-radius: 3px; }

/* ========== SCENE 7 — CTA ========== */
.scene-cta { flex-direction: column; gap: 24px; text-align: center; }
.scene-cta .cta-logo { opacity: 0; transform: scale(0.8); }
.scene-cta .cta-text { opacity: 0; transform: translateY(20px); color: rgba(255,255,255,0.6); }
.scene-cta .cta-button {
  opacity: 0; transform: translateY(15px);
  display: inline-flex; align-items: center; gap: 8px;
  padding: 16px 36px; border-radius: 999px;
  background: linear-gradient(135deg, var(--accent-purple), var(--accent-rose));
  color: white; font-size: 15px; font-weight: 600; letter-spacing: 0.5px; border: none;
  box-shadow: 0 12px 40px rgba(192,132,252,0.3);
}
.scene-cta .cta-available {
  opacity: 0;
  font-size: 12px;
  color: rgba(255,255,255,0.35);
  letter-spacing: 1.5px;
  text-transform: uppercase;
}

/* ========== PROGRESS BAR ========== */
.progress-bar {
  position: fixed; bottom: 0; left: 0; height: 3px;
  background: linear-gradient(90deg, var(--accent-purple), var(--accent-rose));
  z-index: 100;
}

/* ========== REPLAY ========== */
.replay-hint {
  position: fixed; bottom: 20px; right: 20px; font-size: 11px;
  color: rgba(255,255,255,0.3); z-index: 100; opacity: 0; transition: opacity 0.5s ease;
}
</style>
</head>
<body>

<!-- ===== OCEAN BACKGROUND ===== -->
<div class="ocean-bg" id="oceanBg">
  <div class="ocean-base" id="oceanBase"></div>

  <!-- SVG Waves -->
  <div class="wave">
    <svg viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.04)" d="M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,213.3C672,224,768,224,864,208C960,192,1056,160,1152,154.7C1248,149,1344,171,1392,181.3L1440,192L1440,320L0,320Z"/></svg>
  </div>
  <div class="wave">
    <svg viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.03)" d="M0,288L48,272C96,256,192,224,288,213.3C384,203,480,213,576,229.3C672,245,768,267,864,261.3C960,256,1056,224,1152,213.3C1248,203,1344,213,1392,218.7L1440,224L1440,320L0,320Z"/></svg>
  </div>
  <div class="wave">
    <svg viewBox="0 0 1440 320" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.02)" d="M0,256L48,261.3C96,267,192,277,288,261.3C384,245,480,203,576,197.3C672,192,768,224,864,234.7C960,245,1056,235,1152,218.7C1248,203,1344,181,1392,170.7L1440,160L1440,320L0,320Z"/></svg>
  </div>

  <div class="ocean-color-overlay" id="oceanColor"></div>
  <div class="ocean-aurora" id="oceanAurora"></div>

  <!-- Light particles -->
  <div id="particles"></div>
</div>

<div class="stage">

  <!-- SCENE 1 — INTRO -->
  <div class="scene scene-intro" id="scene1">
    <div class="logo-wrapper echo-logo-large">
      <svg width="90" height="90" viewBox="0 0 120 120" fill="none">
        <defs>
          <radialGradient id="c1" cx="35%" cy="30%" r="70%"><stop offset="0%" stop-color="#b88bff"/><stop offset="55%" stop-color="#9b5cff"/><stop offset="100%" stop-color="#ff5fb8"/></radialGradient>
          <linearGradient id="r1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#c084fc"/><stop offset="100%" stop-color="#f472b6"/></linearGradient>
        </defs>
        <circle cx="60" cy="60" r="52" fill="none" stroke="url(#r1)" stroke-width="2.2" opacity="0.5"/>
        <circle cx="60" cy="60" r="36" fill="none" stroke="url(#r1)" stroke-width="2.4" opacity="0.7"/>
        <circle cx="60" cy="60" r="22" fill="url(#c1)" stroke="rgba(255,255,255,0.35)" stroke-width="1"/>
        <text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope,sans-serif" font-weight="600" fill="#fff">E.</text>
      </svg>
      <div class="logo-name">ECHO.</div>
    </div>
    <div class="tagline text-sub">Journal émotionnel propulsé par l'IA</div>
  </div>

  <!-- SCENE 2 — HOOK -->
  <div class="scene scene-hook" id="scene2">
    <div class="hook-line text-sub xs">Et si chaque émotion</div>
    <div class="hook-line text-hero lg">Devenait une<br><span class="text-accent">œuvre d'art</span></div>
  </div>

  <!-- SCENE 3 — Mosaïque -->
  <div class="scene scene-feature" id="scene3">
    <div class="feature-text">
      <div class="feature-tag">Mosaïque émotionnelle</div>
      <h3>Chaque souvenir,<br>une tuile unique</h3>
      <p>Vos émotions se transforment en une galerie visuelle vivante. Chaque entrée devient une œuvre.</p>
    </div>
    <div class="phone-mockup">
      <div class="phone-body"><div class="phone-screen"><div class="screen-content" id="screen-mosaic"></div></div></div>
    </div>
  </div>

  <!-- SCENE 4 — Écriture -->
  <div class="scene scene-feature reverse" id="scene4">
    <div class="feature-text">
      <div class="feature-tag">Écriture & voix</div>
      <h3>Écrivez ou<br>dictez librement</h3>
      <p>Capturez vos pensées par le texte ou la voix. L'IA analyse en profondeur chaque nuance émotionnelle.</p>
    </div>
    <div class="phone-mockup">
      <div class="phone-body"><div class="phone-screen"><div class="screen-content" id="screen-create"></div></div></div>
    </div>
  </div>

  <!-- SCENE 5 — Visualisation -->
  <div class="scene scene-feature" id="scene5">
    <div class="feature-text">
      <div class="feature-tag">6 styles visuels</div>
      <h3>L'art naît<br>de vos émotions</h3>
      <p>Géométrique, aquarelle, organique... Chaque style traduit votre monde intérieur en couleurs.</p>
    </div>
    <div class="phone-mockup">
      <div class="phone-body"><div class="phone-screen"><div class="screen-content" id="screen-visual"></div></div></div>
    </div>
  </div>

  <!-- SCENE 6 — Stats -->
  <div class="scene scene-feature reverse" id="scene6">
    <div class="feature-text">
      <div class="feature-tag">Insights & tendances</div>
      <h3>Comprenez votre<br>paysage intérieur</h3>
      <p>Suivez vos émotions au fil du temps. Découvrez vos tendances, vos cycles, votre évolution.</p>
    </div>
    <div class="phone-mockup">
      <div class="phone-body"><div class="phone-screen"><div class="screen-content" id="screen-stats"></div></div></div>
    </div>
  </div>

  <!-- SCENE 7 — CTA -->
  <div class="scene scene-cta" id="scene7">
    <div class="cta-logo echo-logo-large">
      <svg width="60" height="60" viewBox="0 0 120 120" fill="none">
        <circle cx="60" cy="60" r="52" fill="none" stroke="url(#r1)" stroke-width="2.2" opacity="0.5"/>
        <circle cx="60" cy="60" r="36" fill="none" stroke="url(#r1)" stroke-width="2.4" opacity="0.7"/>
        <circle cx="60" cy="60" r="22" fill="url(#c1)" stroke="rgba(255,255,255,0.35)" stroke-width="1"/>
        <text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope,sans-serif" font-weight="600" fill="#fff">E.</text>
      </svg>
      <div class="logo-name" style="font-size:48px">ECHO.</div>
    </div>
    <div class="cta-text text-sub">Transformez vos émotions en art</div>
    <button class="cta-button">Commencer gratuitement</button>
    <div class="cta-available">Disponible bientôt sur iOS & Web</div>
  </div>

</div>

<div class="progress-bar" id="progressBar"></div>
<div class="replay-hint" id="replayHint">Appuyez R pour rejouer</div>

<script>
// ============================================================
// ECHO. SHOWCASE — OCEAN + UI — 35s ENGINE
// ============================================================

const EC = {
  joie:['#FFD700','#FFA500','#FF6B35'], tristesse:['#4169E1','#6A5ACD','#1E3A8A'],
  colère:['#DC143C','#FF4500','#8B0000'], peur:['#2F4F4F','#000000','#4B5563'],
  sérénité:['#98FB98','#87CEEB','#6EE7B7'], surprise:['#FFFF00','#FF69B4','#F59E0B'],
  nostalgie:['#DDA0DD','#9370DB','#A78BFA'], anxiété:['#A9A9A9','#696969','#6B7280'],
  espoir:['#87CEEB','#FFD700','#60A5FA'], frustration:['#FF8C00','#CD5C5C','#DC2626'],
};

function h2r(hex, a) {
  return `rgba(${parseInt(hex.slice(1,3),16)},${parseInt(hex.slice(3,5),16)},${parseInt(hex.slice(5,7),16)},${a})`;
}

function drawTile(cv, em, st, int) {
  const s=300; cv.width=s; cv.height=s;
  const x=cv.getContext('2d'), c=EC[em]||EC.joie, i=int;
  if(st==='aquarelle'){x.fillStyle='#faf9f7';x.fillRect(0,0,s,s);for(let g=0;g<600;g++){x.fillStyle=`rgba(0,0,0,${Math.random()*0.02})`;x.fillRect(Math.random()*s,Math.random()*s,1,1);}for(let l=0;l<5;l++){const lx=s*(0.2+Math.random()*0.6),ly=s*(0.2+Math.random()*0.6),ls=60+Math.random()*i*20;for(let j=0;j<8;j++){const cx=lx+(Math.random()-0.5)*ls*0.4,cy=ly+(Math.random()-0.5)*ls*0.4,cr=ls*(0.3+Math.random()*0.5);const gr=x.createRadialGradient(cx,cy,0,cx,cy,cr);gr.addColorStop(0,h2r(c[l%3],0.12+i*0.01));gr.addColorStop(0.6,h2r(c[(l+1)%3],0.04));gr.addColorStop(1,'rgba(0,0,0,0)');x.beginPath();x.arc(cx,cy,cr,0,Math.PI*2);x.fillStyle=gr;x.fill();}}}
  else if(st==='geometrique'){const cn=s/2;const bg=x.createRadialGradient(cn,cn,0,cn,cn,s*0.7);bg.addColorStop(0,h2r(c[0],0.15));bg.addColorStop(1,h2r(c[2],0.06));x.fillStyle=bg;x.fillRect(0,0,s,s);for(let n=0;n<4+Math.floor(i*0.5);n++){const sd=3+Math.floor(Math.random()*5),rd=25+Math.random()*i*10,cx=cn+(Math.random()-0.5)*s*0.5,cy=cn+(Math.random()-0.5)*s*0.5,rot=Math.random()*Math.PI*2;x.beginPath();for(let j=0;j<=sd;j++){const a=rot+(j/sd)*Math.PI*2;j===0?x.moveTo(cx+Math.cos(a)*rd,cy+Math.sin(a)*rd):x.lineTo(cx+Math.cos(a)*rd,cy+Math.sin(a)*rd);}x.closePath();x.fillStyle=h2r(c[n%3],0.22+i*0.03);x.fill();x.strokeStyle=h2r(c[n%3],0.4);x.lineWidth=1.5;x.stroke();}}
  else if(st==='organique'){const cn=s/2;const bg=x.createRadialGradient(cn,cn,0,cn,cn,s*0.8);bg.addColorStop(0,h2r(c[1],0.12));bg.addColorStop(1,h2r(c[2],0.04));x.fillStyle=bg;x.fillRect(0,0,s,s);for(let b=0;b<4;b++){const bx=cn+(Math.random()-0.5)*s*0.4,by=cn+(Math.random()-0.5)*s*0.4,bs=40+Math.random()*i*15;x.beginPath();for(let p=0;p<=7;p++){const a=(p/7)*Math.PI*2,w=bs*(0.7+Math.random()*0.6);const px=bx+Math.cos(a)*w,py=by+Math.sin(a)*w;if(p===0)x.moveTo(px,py);else{const ca=((p-0.5)/7)*Math.PI*2;x.quadraticCurveTo(bx+Math.cos(ca)*w*1.2,by+Math.sin(ca)*w*1.2,px,py);}}x.closePath();const gr=x.createRadialGradient(bx,by,0,bx,by,bs);gr.addColorStop(0,h2r(c[b%3],0.35));gr.addColorStop(1,h2r(c[(b+1)%3],0.08));x.fillStyle=gr;x.fill();}}
  else if(st==='mosaique'){const gs=5+Math.floor(i*0.4),ts=s/gs;x.fillStyle='#f8f8f6';x.fillRect(0,0,s,s);for(let r=0;r<gs;r++)for(let co=0;co<gs;co++){const px=co*ts+2,py=r*ts+2,w=ts-4;x.beginPath();x.roundRect(px,py,w,w,w*0.15);x.fillStyle=h2r(c[(r+co)%3],0.15+Math.random()*i*0.05);x.fill();}}
  else if(st==='minimaliste'){const cn=s/2;x.fillStyle='#fefefe';x.fillRect(0,0,s,s);for(let cc=0;cc<3;cc++){x.beginPath();x.arc(cn,cn,30+cc*35,0,Math.PI*2);x.strokeStyle=h2r(c[cc%3],0.2+cc*0.06);x.lineWidth=1;x.stroke();}x.beginPath();x.arc(cn+i*3,cn-i*2,5,0,Math.PI*2);x.fillStyle=h2r(c[0],0.5);x.fill();}
  else{const bg=x.createLinearGradient(0,0,s,s);bg.addColorStop(0,h2r(c[2],0.08));bg.addColorStop(1,h2r(c[0],0.12));x.fillStyle=bg;x.fillRect(0,0,s,s);for(let r=0;r<4;r++){const rw=30+Math.random()*i*12,rh=20+Math.random()*i*10;x.save();x.translate(Math.random()*s*0.7+rw/2,Math.random()*s*0.7+rh/2);x.rotate((Math.random()-0.5)*0.8);x.fillStyle=h2r(c[r%3],0.18);x.fillRect(-rw/2,-rh/2,rw,rh);x.restore();}}
}

// ========== BUILD SCREENS ==========
function buildScreenMosaic(){const el=document.getElementById('screen-mosaic');const ems=['sérénité','joie','nostalgie','espoir','tristesse','surprise','colère','anxiété'];const sts=['aquarelle','geometrique','organique','mosaique','minimaliste','abstrait','aquarelle','organique'];el.innerHTML=`<div class="mini-status"><span>9:41</span><span>●●●</span></div><div class="mini-topbar"><div class="mini-topbar-left"><svg width="18" height="18" viewBox="0 0 120 120" fill="none"><circle cx="60" cy="60" r="22" fill="url(#c1)"/><text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope" font-weight="600" fill="#fff">E.</text></svg><h2>ECHO.</h2></div><div class="mini-topbar-nav"><div class="mini-pill">Mosaïque</div><div class="mini-btn"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></div></div></div><div class="mini-grid" id="miniGrid"></div>`;const g=el.querySelector('#miniGrid');ems.forEach((em,i)=>{const t=document.createElement('div');t.className='mini-tile';const cv=document.createElement('canvas');drawTile(cv,em,sts[i],5+Math.floor(Math.random()*4));t.appendChild(cv);g.appendChild(t);});}

function buildScreenCreate(){const el=document.getElementById('screen-create');el.innerHTML=`<div class="mini-status"><span>9:41</span><span>●●●</span></div><div class="mini-topbar"><div class="mini-topbar-left"><svg width="18" height="18" viewBox="0 0 120 120" fill="none"><circle cx="60" cy="60" r="22" fill="url(#c1)"/><text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope" font-weight="600" fill="#fff">E.</text></svg><h2>ECHO.</h2></div><div class="mini-topbar-nav"><div class="mini-pill outline">Retour</div></div></div><div class="create-screen"><div class="create-header">Nouvelle entrée</div><div class="create-textarea">Aujourd'hui, le ciel était d'un bleu intense. J'ai ressenti une vague de sérénité en marchant le long de la côte. Les vagues murmuraient des mots apaisants...</div><div class="create-styles"><div class="style-chip selected">Aquarelle</div><div class="style-chip">Géométrique</div><div class="style-chip">Organique</div><div class="style-chip">Minimaliste</div><div class="style-chip">Abstrait</div><div class="style-chip">Mosaïque</div></div><div class="voice-wave" id="voiceWave"></div></div>`;const w=el.querySelector('#voiceWave');for(let i=0;i<24;i++){const b=document.createElement('div');b.className='voice-bar';b.style.animationDelay=`${i*0.06}s`;b.style.height='6px';w.appendChild(b);}}

function buildScreenVisual(){const el=document.getElementById('screen-visual');el.innerHTML=`<div class="mini-status"><span>9:41</span><span>●●●</span></div><div class="mini-topbar"><div class="mini-topbar-left"><svg width="18" height="18" viewBox="0 0 120 120" fill="none"><circle cx="60" cy="60" r="22" fill="url(#c1)"/><text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope" font-weight="600" fill="#fff">E.</text></svg><h2>ECHO.</h2></div><div class="mini-topbar-nav"><div class="mini-pill outline">Retour</div></div></div><div class="visual-screen"><div class="visual-label">Style aquarelle</div><div class="visual-canvas-wrapper"><canvas id="visualCanvas"></canvas></div><div class="visual-emotion">Sérénité</div><div class="visual-intensity">Intensité 8/10</div><div style="margin-top:12px"><div class="create-styles" style="justify-content:center"><div class="style-chip selected">Aquarelle</div><div class="style-chip">Géométrique</div><div class="style-chip">Organique</div></div></div></div>`;drawTile(document.getElementById('visualCanvas'),'sérénité','aquarelle',8);}

function buildScreenStats(){const el=document.getElementById('screen-stats');const ems=[{n:'Sérénité',p:72,c:'#98FB98'},{n:'Joie',p:58,c:'#FFD700'},{n:'Nostalgie',p:45,c:'#DDA0DD'},{n:'Espoir',p:38,c:'#87CEEB'},{n:'Tristesse',p:22,c:'#4169E1'}];el.innerHTML=`<div class="mini-status"><span>9:41</span><span>●●●</span></div><div class="mini-topbar"><div class="mini-topbar-left"><svg width="18" height="18" viewBox="0 0 120 120" fill="none"><circle cx="60" cy="60" r="22" fill="url(#c1)"/><text x="60" y="68" text-anchor="middle" font-size="26" font-family="Manrope" font-weight="600" fill="#fff">E.</text></svg><h2>ECHO.</h2></div><div class="mini-topbar-nav"><div class="mini-pill">Stats</div></div></div><div class="stats-screen"><div class="stat-card"><div class="stat-label">Émotion dominante</div><div class="stat-value" style="color:#98FB98">Sérénité</div></div><div class="stat-card"><div class="stat-label">Répartition émotionnelle</div>${ems.map(e=>`<div class="stat-bar-row"><div class="stat-bar-label">${e.n}</div><div class="stat-bar-track"><div class="stat-bar-fill" style="width:${e.p}%;background:${e.c}"></div></div></div>`).join('')}</div><div class="stat-card"><div class="stat-label">Entrées ce mois</div><div class="stat-value">24</div></div></div>`;}

// ========== PARTICLES ==========
function createParticles(){const c=document.getElementById('particles');for(let i=0;i<30;i++){const p=document.createElement('div');p.className='particle';p.style.left=Math.random()*100+'%';p.style.top=(30+Math.random()*60)+'%';p.style.animationDelay=(-Math.random()*10)+'s';p.style.animationDuration=(8+Math.random()*8)+'s';const s=2+Math.random()*3;p.style.width=s+'px';p.style.height=s+'px';c.appendChild(p);}}

// ========== OCEAN TRANSITION ==========
function oceanToDreamy(){document.getElementById('oceanBase').classList.add('dreamy');document.getElementById('oceanColor').classList.add('active');document.getElementById('oceanAurora').classList.add('active');document.querySelectorAll('.particle').forEach(p=>p.classList.add('active'));}

// ========== ANIMATION ENGINE ==========
function anim(el, props, dur, del=0, ease='cubic-bezier(0.16,1,0.3,1)'){
  return new Promise(r=>{setTimeout(()=>{el.style.transition=Object.keys(props).map(k=>`${k} ${dur}ms ${ease}`).join(', ');Object.entries(props).forEach(([k,v])=>el.style[k]=v);setTimeout(r,dur);},del);});
}
async function fadeIn(id,d=500){const s=document.getElementById(id);s.classList.add('active');await anim(s,{opacity:'1'},d,0,'ease');}
async function fadeOut(id,d=400){const s=document.getElementById(id);await anim(s,{opacity:'0'},d,0,'ease');s.classList.remove('active');}

// ========== MASTER TIMELINE (35s) ==========
async function run(){
  const T=35000,t0=Date.now(),pb=document.getElementById('progressBar');
  const pi=setInterval(()=>{const p=Math.min(((Date.now()-t0)/T)*100,100);pb.style.width=p+'%';if(p>=100)clearInterval(pi);},50);

  // 0s: Ocean is grey

  // SCENE 1: INTRO (0-3.5s)
  await fadeIn('scene1',600);
  const s1=document.getElementById('scene1');
  await anim(s1.querySelector('.logo-wrapper'),{opacity:'1',transform:'scale(1)'},800);
  await anim(s1.querySelector('.tagline'),{opacity:'1',transform:'translateY(0)'},600,200);

  // 1.5s: Start ocean transition to dreamy
  setTimeout(oceanToDreamy, 1500);

  await new Promise(r=>setTimeout(r,1200));
  await fadeOut('scene1',500);

  // SCENE 2: HOOK (3.5-6.5s)
  await fadeIn('scene2',400);
  for(const h of document.querySelectorAll('#scene2 .hook-line'))
    await anim(h,{opacity:'1',transform:'translateY(0)'},600,150);
  await new Promise(r=>setTimeout(r,1400));
  await fadeOut('scene2',500);

  // SCENE 3: Mosaïque (6.5-12s)
  await fadeIn('scene3',400);
  await Promise.all([
    anim(document.querySelector('#scene3 .feature-text'),{opacity:'1',transform:'translateX(0)'},800),
    anim(document.querySelector('#scene3 .phone-mockup'),{opacity:'1',transform:'translateX(0)'},800,200),
  ]);
  await new Promise(r=>setTimeout(r,4000));
  await fadeOut('scene3',500);

  // SCENE 4: Écriture (12-18s)
  await fadeIn('scene4',400);
  await Promise.all([
    anim(document.querySelector('#scene4 .feature-text'),{opacity:'1',transform:'translateX(0)'},800),
    anim(document.querySelector('#scene4 .phone-mockup'),{opacity:'1',transform:'translateX(0)'},800,200),
  ]);
  await new Promise(r=>setTimeout(r,4000));
  await fadeOut('scene4',500);

  // SCENE 5: Visualisation (18-24s)
  await fadeIn('scene5',400);
  await Promise.all([
    anim(document.querySelector('#scene5 .feature-text'),{opacity:'1',transform:'translateX(0)'},800),
    anim(document.querySelector('#scene5 .phone-mockup'),{opacity:'1',transform:'translateX(0)'},800,200),
  ]);
  await new Promise(r=>setTimeout(r,4000));
  await fadeOut('scene5',500);

  // SCENE 6: Stats (24-30s)
  await fadeIn('scene6',400);
  await Promise.all([
    anim(document.querySelector('#scene6 .feature-text'),{opacity:'1',transform:'translateX(0)'},800),
    anim(document.querySelector('#scene6 .phone-mockup'),{opacity:'1',transform:'translateX(0)'},800,200),
  ]);
  await new Promise(r=>setTimeout(r,4000));
  await fadeOut('scene6',500);

  // SCENE 7: CTA (30-35s)
  await fadeIn('scene7',500);
  await anim(document.querySelector('#scene7 .cta-logo'),{opacity:'1',transform:'scale(1)'},700);
  await anim(document.querySelector('#scene7 .cta-text'),{opacity:'1',transform:'translateY(0)'},600,150);
  await anim(document.querySelector('#scene7 .cta-button'),{opacity:'1',transform:'translateY(0)'},600,150);
  await anim(document.querySelector('#scene7 .cta-available'),{opacity:'1'},600,300);

  clearInterval(pi); pb.style.width='100%';
  setTimeout(()=>document.getElementById('replayHint').style.opacity='1',1500);
}

// ========== INIT ==========
window.addEventListener('DOMContentLoaded',()=>{
  buildScreenMosaic();buildScreenCreate();buildScreenVisual();buildScreenStats();
  createParticles();
  setTimeout(run,500);
});
document.addEventListener('keydown',e=>{if(e.key==='r'||e.key==='R')location.reload();});
</script>
</body>
</html>
